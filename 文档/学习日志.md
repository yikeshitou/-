# 软件工程学习日记

## 2018年3月19日星期一

* 学习使用express 充当中间件，可以接受到html页面 form 标签传来的post 请求（对应标记路径即可）
* 学习使用 \<a\> 标签在 \<form\> 标签里提交表单，这一点也只需要 document.getelementbyid 然后submit 即可。
* 学习使用如何使鼠标悬停时出现手型：改变.css 文件假如 cursor:pointer 即可。
* 学习使用github 创建远程仓库，并与本地仓库关联；其中重要的步骤是在本地生成公钥和私钥，并将公钥放到 github 的列表里。

## 2018年3月20日星期二

* 加入了与数据库的连接，先下载了mysql 数据库的服务器，客户端，bench，随后进行创建库，表等常规操作。
* Node.js 与服务器建立连接的方法：createConnection
* Req.body.xxx 即可引用表单中的数据
* 比较重要的： body-parser 是node.js 的一个中间件，这个模块可以用来解析 raw, json, 文本， url-encoded 类型的数据；HTTP 本身使用ASCII 编码，post 提交的数据必须在消息主体中，但HTTP协议并没有规定数据的编码方式，这时就需要根据 Content-Type 来决定使用何种方式解析主体。

    一般来说共有四种方式:

    1. application/x-www-form-urlencoded
    2. Mutipart/form-dat
    3. Application/json
    4. Text/xml
  只需要检查cotent-type字段就可以了。

* Sql 函数的查询结果使用非阻塞的回调模式，需要写回调函数。

## 2018年3月21日星期三

* 今天做的主要是安全连接。使用HTTPS 协议来传输帐户名和密钥。做法是再赛门铁克上申请了CA，然后用nginx 作为代理服务器，通过nginx 来监听443 端口，并使用申请的证书完成HTTPS 服务器；
* HTTPS 协议先做了SSL 协议，传递对称密钥，用对称密钥来加密。

## 2018年3月25日星期日

* 今天哲宁加上了验证码，效果还不错。基于一个外部的库可以随机生成一些不规则的数字图形。
* 间隔几天主要做的是前端的开发，这次使用了bootstrap 框架，生成了教师端的管理程序。要注意bootstrap 2 和 3 的区别还是很大的。 比如span 这个样式没有了。
* 遇到的问题就是有时候页面渲染不出来，检查时发现是因为express 静态资源路径没有设置。
* 对密码进行了哈希处理，不再存储明文。

## 2018年3月25日星期一

* 今天做的是在数据库中存储了用户名和哈希之后的密码，发现很多数据库语言都忘了，又要复习一遍。
* mysql 在部署到云服务器上的时候出现了一点问题，应该是驱动版本不匹配。 重装之后就好了。
* typeof 用于检查数据类型，调试的时候很有用。
* 连接如果想继续使用的话不能用end()，今天刚刚发现这个bug。
* hash.digest() 只能使用一次，用完之后这个hash 就不能用了。

## 2018年3月29日星期四

* 今天做的主要是是登陆认证的策略。了解了两种认证策略，一种是基于session 的，一种是基于token 的；
  1. 基于session 的认证将认证信息存储在服务器端，开销较大，不利于进行分布式扩展，容易受到跨站请求伪造攻击。
  2. 基于token 的认证服务器用私钥签名 header,payloade 后将其回传给用户，适合做一次性的认证。
* 这里使用带签名的cookies 认证，本质上相当于回传了一个token，通过httponly 保护不受跨站脚本攻击。用签名保证不受篡改。用过期策略保证不受重放攻击。
* 遇到的问题，在新版本的express 框架中原来的中间件大部分不再内置了，需要手动的导入包。 
* express 框架中使用use 来使用中间件，客户端请求到来时，先执行中间件。中间件可以挂载路径。不挂载路径的中间件会在所有的请求上执行。中间件执行的默认顺序就是代码中的顺序。（可以调用next("router")来改变）

## 2018年4月5日星期四

* 说一个express 静态路径的问题。 因为HTML 中的图片是分开请求的，而express 中如果没有设置路由的话就收不到了。所以这时候要么一点点的设路由，要么直接用static 中间件做静态资源，这样在 HTML 文件中引用时只需要把自己当作是在 静态资源文件夹下就好了。

## 2018年4月7日星期六

* render 的第二个参数传进去的就是json 对象本身，这点非常重要。
* 使用url.parse 来处理查询。
